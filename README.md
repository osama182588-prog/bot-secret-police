# ğŸš” Ù†Ø¸Ø§Ù… Ø¥Ø¬Ø§Ø²Ø§Øª Ø§Ù„Ø´Ø±Ø·Ø© - Police Leave Management Bot

Ù†Ø¸Ø§Ù… Ø§Ø­ØªØ±Ø§ÙÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø¥Ø¬Ø§Ø²Ø§Øª Ù‚Ø³Ù… Ø§Ù„Ø´Ø±Ø·Ø© Ø¯Ø§Ø®Ù„ Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯ØŒ Ù…Ø¨Ù†ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Discord.js v14.

A professional police department leave management system for Discord, built with Discord.js v14.

## âœ¨ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª / Features

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© / Core Features
- ğŸ“ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨Ø§Øª Ø¥Ø¬Ø§Ø²Ø© Ø¹Ø¨Ø± Ù†Ù…ÙˆØ°Ø¬ Modal
- âœ… Ù‚Ø¨ÙˆÙ„/Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
- ğŸ·ï¸ Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ¥Ø¹Ø·Ø§Ø¡ Ø±ØªØ¨ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
- ğŸ“Š Ù†Ø¸Ø§Ù… Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§Ù…Ù„
- ğŸ“‹ Ø³Ø¬Ù„ ÙƒØ§Ù…Ù„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
- ğŸ”” Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ù„Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©
- ğŸ“ Ù†Ø¸Ø§Ù… Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©

### Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø© / Advanced Features
- ğŸ”’ Ù‚ÙÙ„/ÙØªØ­ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
- ğŸ“¤ ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (CSV/JSON)
- ğŸŒ Ø¯Ø¹Ù… Ø§Ù„Ù„ØºØªÙŠÙ† (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©/Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©)
- ğŸ›¡ï¸ Ù†Ø¸Ø§Ù… ØµÙ„Ø§Ø­ÙŠØ§Øª Ù…ØªÙƒØ§Ù…Ù„
- âš ï¸ Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø³Ø¨Ø§Ù…
- ğŸ“… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®
- ğŸ”„ Ù…Ù†Ø¹ ØªØ¯Ø§Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø§Øª
- â° ØªØ°ÙƒÙŠØ±Ø§Øª Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©

## ğŸ“¦ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª / Requirements

- Node.js 16.9.0 Ø£Ùˆ Ø£Ø­Ø¯Ø«
- npm Ø£Ùˆ yarn
- Discord Bot Token

## ğŸš€ Ø§Ù„ØªØ«Ø¨ÙŠØª / Installation

1. **Ø§Ø³ØªÙ†Ø³Ø§Ø® Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ / Clone the repository**
   ```bash
   git clone https://github.com/your-repo/police-leave-bot.git
   cd police-leave-bot
   ```

2. **ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª / Install dependencies**
   ```bash
   npm install
   ```

3. **Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ¦Ø© / Setup environment file**
   ```bash
   cp .env.example .env
   ```

4. **ØªØ¹Ø¯ÙŠÙ„ Ù…Ù„Ù .env / Edit .env file**
   ```env
   DISCORD_TOKEN=your_bot_token_here
   CLIENT_ID=your_client_id_here
   GUILD_ID=your_guild_id_here
   LEAVE_REQUEST_CHANNEL_ID=channel_id_for_leave_requests
   LEAVE_REVIEW_CHANNEL_ID=channel_id_for_police_administration
   LEAVE_LOG_CHANNEL_ID=channel_id_for_logs
   NOTIFICATION_CHANNEL_ID=channel_id_for_notifications
   ADMIN_ROLE_ID=admin_role_id_for_leave_management
   NOTIFICATION_ROLE_ID=role_id_to_mention_on_new_requests
   REJECTED_LEAVE_ROLE_ID=role_id_for_rejected_leave
   DEFAULT_LANGUAGE=ar
   MAX_LEAVE_REQUESTS_PER_WEEK=2
   REMINDER_HOURS_BEFORE_END=24
   ```

5. **Ù†Ø´Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø± / Deploy commands**
   ```bash
   npm run deploy-commands
   ```

6. **ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¨ÙˆØª / Start the bot**
   ```bash
   npm start
   ```

## ğŸ“‹ Ø§Ù„Ø£ÙˆØ§Ù…Ø± / Commands

| Ø§Ù„Ø£Ù…Ø± / Command | Ø§Ù„ÙˆØµÙ / Description |
|----------------|---------------------|
| `/deploy-embed` | Ù†Ø´Ø± Ø¥Ù…Ø¨ÙŠØ¯ Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© / Deploy leave request embed |
| `/my-requests` | Ø¹Ø±Ø¶ Ø·Ù„Ø¨Ø§ØªÙŠ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© / View my previous requests |
| `/search-request` | Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø·Ù„Ø¨ / Search for a request |
| `/leave-statistics` | Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª / View statistics |
| `/cancel-leave` | Ø¥Ù„ØºØ§Ø¡ Ø¥Ø¬Ø§Ø²Ø© / Cancel a leave |
| `/export-leaves` | ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª / Export data |
| `/lock-leaves` | Ù‚ÙÙ„ Ø§Ù„Ù†Ø¸Ø§Ù… / Lock the system |
| `/unlock-leaves` | ÙØªØ­ Ø§Ù„Ù†Ø¸Ø§Ù… / Unlock the system |
| `/set-language` | ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ© / Change language |
| `/add-note` | Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø© / Add a note |

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ / Project Structure

```
police-leave-bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ commands/          # Ø£ÙˆØ§Ù…Ø± Ø§Ù„Ø³Ù„Ø§Ø´
â”‚   â”œâ”€â”€ events/            # Ø£Ø­Ø¯Ø§Ø« Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
â”‚   â”œâ”€â”€ handlers/          # Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„ØªÙØ§Ø¹Ù„Ø§Øª
â”‚   â”œâ”€â”€ utils/             # Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚   â”œâ”€â”€ database/          # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”œâ”€â”€ config.js          # Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
â”‚   â”œâ”€â”€ index.js           # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
â”‚   â””â”€â”€ deploy-commands.js # Ù†Ø´Ø± Ø§Ù„Ø£ÙˆØ§Ù…Ø±
â”œâ”€â”€ lang/                  # Ù…Ù„ÙØ§Øª Ø§Ù„Ù„ØºØ©
â”‚   â”œâ”€â”€ ar.json
â”‚   â””â”€â”€ en.json
â”œâ”€â”€ data/                  # Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (ØªÙÙ†Ø´Ø£ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹)
â”œâ”€â”€ package.json
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
```

## ğŸ”§ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª / Configuration

### Ø­Ø¯ÙˆØ¯ Ù…Ø¯Ø© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© Ø­Ø³Ø¨ Ø§Ù„Ø±ØªØ¨Ø© / Role Duration Limits
ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù…Ø¯Ø© Ø§Ù„Ø¥Ø¬Ø§Ø²Ø© Ù„ÙƒÙ„ Ø±ØªØ¨Ø© ÙÙŠ Ù…Ù„Ù `src/config.js`:

```javascript
roleDurationLimits: {
    'role_id_1': 7,  // Ø¶Ø§Ø¨Ø·: 7 Ø£ÙŠØ§Ù…
    'role_id_2': 10, // Ù…Ù„Ø§Ø²Ù…: 10 Ø£ÙŠØ§Ù…
    'role_id_3': 30  // Ù‚Ø§Ø¦Ø¯: 30 ÙŠÙˆÙ…
}
```

### ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠØ© / Enable Two-Step Approval
```javascript
twoStepApproval: true
```

## ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª / Database

ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¨ÙˆØª SQLite Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ØªÙÙ†Ø´Ø£ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙÙŠ Ù…Ø¬Ù„Ø¯ `data/`.

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ / Tables
- `leaves` - Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø²Ø©
- `notes` - Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©
- `settings` - Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
- `status_history` - Ø³Ø¬Ù„ ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ø­Ø§Ù„Ø©

## ğŸ“ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·Ù„Ø¨ / Request Statuses

| Ø§Ù„Ø­Ø§Ù„Ø© / Status | Ø§Ù„ÙˆØµÙ / Description |
|----------------|---------------------|
| `pending` | Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© / Pending Review |
| `approved` | Ù…Ù‚Ø¨ÙˆÙ„ / Approved |
| `rejected` | Ù…Ø±ÙÙˆØ¶ / Rejected |
| `cancelled` | Ù…Ù„ØºÙ‰ / Cancelled |

## ğŸ” Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª / Permissions

ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
- Manage Roles
- Send Messages
- Embed Links
- Read Message History
- Use Application Commands

### âš ï¸ Privileged Gateway Intents / Ø§Ù„Ù†ÙˆØ§ÙŠØ§ Ø§Ù„Ù…Ù…ÙŠØ²Ø©

ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ù†ÙˆØ§ÙŠØ§ Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙŠ Ø¨ÙˆØ§Ø¨Ø© Ù…Ø·ÙˆØ±ÙŠ Discord:
You must enable the following intents in the Discord Developer Portal:

1. Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ [Discord Developer Portal](https://discord.com/developers/applications)
2. Ø§Ø®ØªØ± ØªØ·Ø¨ÙŠÙ‚Ùƒ / Select your application
3. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Bot** > **Privileged Gateway Intents**
4. ÙØ¹Ù‘Ù„ **SERVER MEMBERS INTENT** / Enable **SERVER MEMBERS INTENT**

> âš ï¸ Ø¨Ø¯ÙˆÙ† ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ù‡ Ø§Ù„Ù†ÙŠØ©ØŒ Ø³ÙŠÙØ´Ù„ Ø§Ù„Ø¨ÙˆØª ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¹ Ø®Ø·Ø£ "Used disallowed intents"
>
> âš ï¸ Without enabling this intent, the bot will fail to login with "Used disallowed intents" error

## ğŸ“ Ø§Ù„Ø¯Ø¹Ù… / Support

Ø¥Ø°Ø§ ÙˆØ§Ø¬Ù‡Øª Ø£ÙŠ Ù…Ø´Ø§ÙƒÙ„ØŒ ÙŠØ±Ø¬Ù‰ ÙØªØ­ Issue ÙÙŠ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹.

## ğŸ“„ Ø§Ù„Ø±Ø®ØµØ© / License

MIT License
